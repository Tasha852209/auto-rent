"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[577],{7740:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(5861),a=t(9439),i=t(4687),s=t.n(i),c=t(2791),o=t(2564),l=t(1413),d=t(3329),u=function(e){return(0,d.jsx)("svg",(0,l.Z)((0,l.Z)({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none"},e),{},{children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.8,strokeWidth:1.5,d:"M15.63 3.458a4.125 4.125 0 0 0-5.835 0L9 4.253l-.795-.795A4.126 4.126 0 0 0 2.37 9.293l.795.795L9 15.922l5.835-5.835.795-.795a4.125 4.125 0 0 0 0-5.835Z"})}))},m=function(e){var n=e.list,t=void 0===n?[]:n,r=e.size,a=void 0===r?"large":r;return(0,d.jsx)("ul",{className:"description__list ".concat(a),children:t.map((function(e){return(0,d.jsx)("li",{children:e},"".concat(e,"_").concat(Math.random(1)))}))})},h=function(e){return(0,d.jsx)("svg",(0,l.Z)((0,l.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),{},{children:(0,d.jsx)("g",{stroke:"#121417",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.8,children:(0,d.jsx)("path",{d:"M18 6 6 18M6 6l12 12"})})}))},f=function(e){var n=e.children,t=e.onCloseModal;(0,c.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,d.jsx)("div",{className:"overlay",onClick:function(e){var n=e.target;e.currentTarget===n&&t()},children:(0,d.jsxs)("div",{className:"modal__content",children:[(0,d.jsx)("button",{type:"button",className:"modal__close-btn",children:(0,d.jsx)(h,{onClick:function(){t()}})}),n]})})},p=t(3433),v=function(e){if("string"===typeof e)return e[0].toUpperCase()+e.slice(1).toLowerCase()},x=t(9282),j=function(e){var n=e.list;return(0,d.jsx)("ul",{className:"chip__list",children:n.map((function(e){var n=e.split(": "),t=(0,a.Z)(n,2),r=t[0],i=t[1];if("string"===typeof i){var s=i.replace(/(\$)(\d+)/,"$2$1");i=s}return(0,d.jsxs)("li",{className:"chip__item",children:[i?"".concat(r,": "):r,i&&(0,d.jsx)("span",{children:i})]},r)}))})};var _=function(e){var n=e.car,t=n.img,r=n.make,a=n.model,i=n.year,s=n.description,c=n.accessories,o=n.functionalities,l=n.rentalConditions,u=n.mileage,h=n.rentalPrice,f=function(e){var n=e.address,t=e.id,r=e.year,a=e.type,i=e.fuelConsumption,s=e.engineSize,c=n.split(",");return[c[1].trim(),c[2].trim(),"Id: ".concat(t).trim(),"Year: ".concat(r).trim(),"Type: ".concat(v(a)).trim(),"Fuel Consumption: ".concat(i).trim(),"Engine Size: ".concat(s).trim()]}(n),_=[].concat((0,p.Z)(l.split("\n")),["Milage: ".concat((0,x.h)(u.toString())),"Price: ".concat(h)]);return(0,d.jsxs)("div",{className:"card-modal",children:[(0,d.jsx)("img",{className:"card-modal__img",src:t,"aria-label":"".concat(r," ").concat(a)}),(0,d.jsxs)("div",{className:"card-modal__car-header",children:[(0,d.jsxs)("h3",{children:["".concat(r," "),(0,d.jsx)("span",{children:a}),", ".concat(i)]}),(0,d.jsx)(m,{list:f,size:"medium"}),(0,d.jsx)("p",{children:s})]}),(0,d.jsxs)("div",{className:"card-modal__accessories",children:[(0,d.jsx)("h4",{children:"Accessories and functionalities:"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{list:c}),(0,d.jsx)(m,{list:o})]})]}),(0,d.jsxs)("div",{className:"card-modal__rental-conditions",children:[(0,d.jsx)("h4",{children:"Rental Conditions:"}),(0,d.jsx)(j,{list:_})]}),(0,d.jsx)("a",{className:"card-modal__btn",href:"tel:+380730000000",children:"Rental Car"})]})},g=t(1888),w=function(e){var n,t=e.car,i=t.id,l=t.img,h=t.make,p=t.model,x=t.year,j=t.rentalPrice,w=t.favorite,b=(0,c.useState)(!1),N=(0,a.Z)(b,2),k=N[0],y=N[1],Z=(0,g.G_)(),C=(0,a.Z)(Z,1)[0];n=k,(0,c.useEffect)((function(){document.body.style.overflow=n?"hidden":"unset"}),[n]);var L=function(e){var n=e.address,t=e.rentalCompany,r=e.typeClass,a=void 0===r?"Premium":r,i=e.type,s=e.model,c=e.id,o=e.functionalities,l=n.split(",");return[l[1].trim(),l[2].trim(),t,a,"".concat(v(i)).trim(),s,"".concat(c).trim(),o[0]]}(t),M=function(){y((function(e){return!e}))},S=function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{C({id:n,favorite:!w})}catch(t){o.Am.warn("Sorry something wrong")}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsxs)("li",{children:[(0,d.jsxs)("div",{className:"card",children:[(0,d.jsxs)("div",{className:"card__wrapper",children:[(0,d.jsxs)("div",{className:"card__thumb-img",children:[(0,d.jsx)("img",{src:l,alt:h,loading:"lazy"}),(0,d.jsx)("button",{type:"button",onClick:function(){return S(i)},children:(0,d.jsx)(u,{className:w?"favorited":""})})]}),(0,d.jsxs)("div",{className:"card__thumb-title",children:[(0,d.jsxs)("h3",{children:["".concat(h," "),(0,d.jsx)("span",{children:p}),", ".concat(x)]}),(0,d.jsx)("p",{children:j})]}),(0,d.jsx)(m,{list:L,size:"small"})]}),(0,d.jsx)("button",{type:"button",className:"card__btn",onClick:M,children:"Learn more"})]}),k&&(0,d.jsx)(f,{onCloseModal:M,children:(0,d.jsx)(_,{car:t})})]})},b=function(e){var n=e.list,t=void 0===n?[]:n;return t.length?(0,d.jsx)("ul",{className:"adverts__list",children:t.map((function(e){return(0,d.jsx)(w,{car:e},"".concat(e.make,"_").concat(Math.random(1)))}))}):(0,d.jsx)("p",{className:"adverts__no-content",children:"Sorry, there are no cars with this request in stock..."})}},5754:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(3329),a=function(e){var n=e.title,t=e.children;return(0,r.jsxs)("section",{className:"section",children:[n&&(0,r.jsx)("h2",{className:"section__title",children:n}),t]})}},1577:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var r=t(3433),a=t(9439),i=t(2791),s=t(4420),c=function(e){return e.filters},o=t(1888),l=t(5754),d=t(6919),u=t(4942),m=t(686),h=t(9282),f=t(1413),p=t(2564),v=t(3329),x=function(e){var n=e.id,t=void 0===n?"text-input":n,r=e.label,s=void 0===r?"label":r,c=e.value,o=void 0===c?{from:"",to:""}:c,l=(0,i.useState)(o),d=(0,a.Z)(l,2),m=d[0],x=d[1],j=function(e){/^[0-9,]+$/.test(e.target.value)||!e.target.value.trim()?x((function(n){return(0,f.Z)((0,f.Z)({},n),{},(0,u.Z)({},e.target.name,(0,h.h)(e.target.value)))})):p.Am.warn("Please write only numbers")};return(0,v.jsxs)("div",{className:"input-fromto-field__group",children:[(0,v.jsx)("p",{children:s}),(0,v.jsxs)("div",{className:"input-fromto__container",children:[(0,v.jsxs)("div",{className:"input-fromto__wrapper",children:[(0,v.jsx)("label",{htmlFor:"".concat(t,"_from"),children:"From"}),(0,v.jsx)("input",{name:"from",value:m.from,className:"input__from",id:"".concat(t,"_from"),type:"text",onChange:j,autoComplete:"off"})]}),(0,v.jsxs)("div",{className:"input-fromto__wrapper",children:[(0,v.jsx)("label",{htmlFor:"".concat(t,"_to"),children:"To"}),(0,v.jsx)("input",{name:"to",value:m.to,className:"input__to",id:"".concat(t,"_to"),type:"text",onChange:j,autoComplete:"off"})]})]})]})},j=function(e){return(0,v.jsx)("svg",(0,f.Z)((0,f.Z)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),{},{children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m5 7.5 5 5 5-5"})}))},_=function(e){var n=e.name,t=e.id,r=e.label,s=e.placeholder,c=void 0===s?"Enter the text":s,o=e.optionList,l=(0,i.useState)(!1),d=(0,a.Z)(l,2),u=d[0],m=d[1],h=(0,i.useState)(null),f=(0,a.Z)(h,2),p=f[0],x=f[1];return(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&m(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[u]),(0,v.jsxs)("div",{className:"dropdown__cotainer",children:[(0,v.jsx)("p",{className:"dropdown__label",children:r}),(0,v.jsxs)("div",{className:"dropdown__select",children:[(0,v.jsxs)("div",{className:"dropdown__header ".concat(u?"dropdown__open":""),onClick:function(){return m(!u)},children:[(0,v.jsx)("input",{type:"text",id:t,name:n,value:p||c,readOnly:!0,className:"dropdown__select--input"}),(0,v.jsx)(j,{})]}),u&&(0,v.jsx)("div",{className:"dropdown__list-container",children:(0,v.jsx)("ul",{className:"dropdown__list",children:o.map((function(e){return(0,v.jsx)("li",{name:n,onClick:(t=e,function(){x(t),m(!1)}),className:"dropdown__item",children:e},Math.random());var t}))})})]})]})},g=function(e){var n=e.filtersList,t=(0,s.I0)(),r=(0,s.v9)(c);return(0,v.jsxs)("form",{className:"filter",onSubmit:function(e){var n;e.preventDefault();var r=e.target.elements,a=r.brand,i=r.price,s=r.from,c=r.to;if(a.value&&"Enter the text"!==a.value||i.value&&"To $"!==i.value||s.value||c.value){var o=(n={},(0,u.Z)(n,a.name,"Enter the text"!==a.value?a.value:""),(0,u.Z)(n,i.name,"To $"!==i.value?i.value:""),(0,u.Z)(n,"mileage",{from:(0,h.q)(s.value),to:(0,h.q)(c.value)}),(0,u.Z)(n,"prices",[]),n);t((0,m.j)(o))}else p.Am.info("Please chose one of filters")},children:[(0,v.jsx)(_,{name:"brand",label:"Car brand",value:r.brand,optionList:n.brands}),(0,v.jsx)(_,{name:"price",label:"Price/ 1 hour",placeholder:"To $",value:r.price,optionList:n.prices}),(0,v.jsx)(x,{name:"mileage",label:"\u0421ar mileage / km",value:r.mileage}),(0,v.jsx)("button",{type:"submit",children:"Search"})]})},w=t(7740),b=function(){var e,n,t,u=(0,s.v9)(c),m=(0,o.FP)().data,h=(0,i.useState)([]),f=(0,a.Z)(h,2),p=f[0],x=f[1],j=(0,i.useState)(1),_=(0,a.Z)(j,2),b=_[0],N=_[1],k=(0,o.Uh)(b),y=k.data,Z=k.isLoading,C={brands:[],prices:[]},L=0,M=0;!Z&&m&&(C={brands:["All"].concat((0,r.Z)(new Set(m.map((function(e){return e.make}))))),prices:(e=0,n=Math.max.apply(Math,(0,r.Z)(new Set(m.map((function(e){return e.rentalPrice.replace(/(\$)/,"")}))))),t=10,Array.from({length:Math.floor((n-e)/t)+1},(function(n,r){return e+r*t})))},M=(L=m.length)?Math.ceil(L/12):1),(0,i.useEffect)((function(){y&&x((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(y))}))}),[y]);var S=(0,i.useMemo)((function(){return function(e,n){return e.filter((function(e){if(n.brand&&e.make!==n.brand&&"All"!==n.brand)return!1;if(n.price&&Number(e.rentalPrice.replace(/(\$)/,""))>Number(n.price))return!1;if(n.mileage.from.trim()||n.mileage.to.trim()){var t=n.mileage,r=t.from,a=t.to,i=Number(e.mileage);if(void 0!==r&&i<Number(r)||void 0!==a&&i>Number(a))return!1}return!0}))}(p,u)}),[p,u]);return(0,v.jsxs)(l.Z,{children:[Z&&(0,v.jsx)(d.Z,{}),!Z&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{filtersList:C}),(0,v.jsx)(w.Z,{list:S}),(0,v.jsx)("div",{className:"buttons__wrapper",children:M>b&&(0,v.jsx)("button",{type:"button",className:"load-more__btn",onClick:function(){N((function(e){return e+1}))},children:"Load more"})})]})]})}},9282:function(e,n,t){t.d(n,{h:function(){return r},q:function(){return a}});var r=function(e){var n=e.replace(/,/g,"");if(n.length>3){for(var t=[],r=n.length;r>0;r-=3)t.unshift(n.slice(Math.max(r-3,0),r));return t.join(",")}return n},a=function(e){return e.replace(/,/g,"")}}}]);
//# sourceMappingURL=577.b58d6e84.chunk.js.map