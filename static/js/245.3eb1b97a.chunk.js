"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[245],{5754:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(184),a=function(e){var n=e.title,t=e.children;return(0,r.jsxs)("section",{className:"section",children:[n&&(0,r.jsx)("h2",{className:"section__title",children:n}),t]})}},9245:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(3433),a=t(9439),i=t(2791),s=t(4420),o=function(e){return e.filters},c=t(1888),l=t(5754),d=t(1006),u=t(4942),m=t(686),h=function(e){var n=e.replace(/,/g,"");if(n.length>3){for(var t=[],r=n.length;r>0;r-=3)t.unshift(n.slice(Math.max(r-3,0),r));return t.join(",")}return n},f=function(e){return e.replace(/,/g,"")},p=t(1413),v=t(2564),x=t(184),j=function(e){var n=e.id,t=void 0===n?"text-input":n,r=e.label,s=void 0===r?"label":r,o=e.value,c=void 0===o?{from:"",to:""}:o,l=(0,i.useState)(c),d=(0,a.Z)(l,2),m=d[0],f=d[1],j=function(e){/^[0-9,]+$/.test(e.target.value)||!e.target.value.trim()?f((function(n){return(0,p.Z)((0,p.Z)({},n),{},(0,u.Z)({},e.target.name,h(e.target.value)))})):v.Am.warn("Please write only numbers")};return(0,x.jsxs)("div",{className:"input-fromto-field__group",children:[(0,x.jsx)("p",{children:s}),(0,x.jsxs)("div",{className:"input-fromto__container",children:[(0,x.jsxs)("div",{className:"input-fromto__wrapper",children:[(0,x.jsx)("label",{htmlFor:"".concat(t,"_from"),children:"From"}),(0,x.jsx)("input",{name:"from",value:m.from,className:"input__from",id:"".concat(t,"_from"),type:"text",onChange:j,autoComplete:"off"})]}),(0,x.jsxs)("div",{className:"input-fromto__wrapper",children:[(0,x.jsx)("label",{htmlFor:"".concat(t,"_to"),children:"To"}),(0,x.jsx)("input",{name:"to",value:m.to,className:"input__to",id:"".concat(t,"_to"),type:"text",onChange:j,autoComplete:"off"})]})]})]})},_=function(e){return(0,x.jsx)("svg",(0,p.Z)((0,p.Z)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),{},{children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m5 7.5 5 5 5-5"})}))},g=function(e){var n=e.name,t=e.id,r=e.label,s=e.placeholder,o=void 0===s?"Enter the text":s,c=e.optionList,l=(0,i.useState)(!1),d=(0,a.Z)(l,2),u=d[0],m=d[1],h=(0,i.useState)(null),f=(0,a.Z)(h,2),p=f[0],v=f[1];return(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&m(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[u]),(0,x.jsxs)("div",{className:"dropdown__cotainer",children:[(0,x.jsx)("p",{className:"dropdown__label",children:r}),(0,x.jsxs)("div",{className:"dropdown__select",children:[(0,x.jsxs)("div",{className:"dropdown__header ".concat(u?"dropdown__open":""),onClick:function(){return m(!u)},children:[(0,x.jsx)("input",{type:"text",id:t,name:n,value:p||o,readOnly:!0,className:"dropdown__select--input"}),(0,x.jsx)(_,{})]}),u&&(0,x.jsx)("div",{className:"dropdown__list-container",children:(0,x.jsx)("ul",{className:"dropdown__list",children:c.map((function(e){return(0,x.jsx)("li",{name:n,onClick:(t=e,function(){v(t),m(!1)}),className:"dropdown__item",children:e},Math.random());var t}))})})]})]})},w=function(e){var n=e.filtersList,t=(0,s.I0)(),r=(0,s.v9)(o);return(0,x.jsxs)("form",{className:"filter",onSubmit:function(e){var n;e.preventDefault();var r=e.target.elements,a=r.brand,i=r.price,s=r.from,o=r.to;if(a.value&&"Enter the text"!==a.value||i.value&&"To $"!==i.value||s.value||o.value){var c=(n={},(0,u.Z)(n,a.name,"Enter the text"!==a.value?a.value:""),(0,u.Z)(n,i.name,"To $"!==i.value?i.value:""),(0,u.Z)(n,"mileage",{from:f(s.value),to:f(o.value)}),(0,u.Z)(n,"prices",[]),n);t((0,m.j)(c))}else v.Am.info("Please chose one of filters")},children:[(0,x.jsx)(g,{name:"brand",label:"Car brand",value:r.brand,optionList:n.brands}),(0,x.jsx)(g,{name:"price",label:"Price/ 1 hour",placeholder:"To $",value:r.price,optionList:n.prices}),(0,x.jsx)(j,{name:"mileage",label:"\u0421ar mileage / km",value:r.mileage}),(0,x.jsx)("button",{type:"submit",children:"Search"})]})},b=t(5861),N=t(4687),k=t.n(N),y=function(e){return(0,x.jsx)("svg",(0,p.Z)((0,p.Z)({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none"},e),{},{children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.8,strokeWidth:1.5,d:"M15.63 3.458a4.125 4.125 0 0 0-5.835 0L9 4.253l-.795-.795A4.126 4.126 0 0 0 2.37 9.293l.795.795L9 15.922l5.835-5.835.795-.795a4.125 4.125 0 0 0 0-5.835Z"})}))},Z=function(e){var n=e.list,t=void 0===n?[]:n,r=e.size,a=void 0===r?"large":r;return(0,x.jsx)("ul",{className:"description__list ".concat(a),children:t.map((function(e){return(0,x.jsx)("li",{children:e},"".concat(e,"_").concat(Math.random(1)))}))})},C=function(e){return(0,x.jsx)("svg",(0,p.Z)((0,p.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),{},{children:(0,x.jsx)("g",{stroke:"#121417",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.8,children:(0,x.jsx)("path",{d:"M18 6 6 18M6 6l12 12"})})}))},L=function(e){var n=e.children,t=e.onCloseModal;(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,x.jsx)("div",{className:"overlay",onClick:function(e){var n=e.target;e.currentTarget===n&&t()},children:(0,x.jsxs)("div",{className:"modal__content",children:[(0,x.jsx)("button",{type:"button",className:"modal__close-btn",children:(0,x.jsx)(C,{onClick:function(){t()}})}),n]})})},M=function(e){if("string"===typeof e)return e[0].toUpperCase()+e.slice(1).toLowerCase()},S=function(e){var n=e.list;return(0,x.jsx)("ul",{className:"chip__list",children:n.map((function(e){var n=e.split(": "),t=(0,a.Z)(n,2),r=t[0],i=t[1];if("string"===typeof i){var s=i.replace(/(\$)(\d+)/,"$2$1");i=s}return(0,x.jsxs)("li",{className:"chip__item",children:[i?"".concat(r,": "):r,i&&(0,x.jsx)("span",{children:i})]},r)}))})};var E=function(e){var n=e.car,t=n.img,a=n.make,i=n.model,s=n.year,o=n.description,c=n.accessories,l=n.functionalities,d=n.rentalConditions,u=n.mileage,m=n.rentalPrice,f=function(e){var n=e.address,t=e.id,r=e.year,a=e.type,i=e.fuelConsumption,s=e.engineSize,o=n.split(",");return[o[1].trim(),o[2].trim(),"Id: ".concat(t).trim(),"Year: ".concat(r).trim(),"Type: ".concat(M(a)).trim(),"Fuel Consumption: ".concat(i).trim(),"Engine Size: ".concat(s).trim()]}(n),p=[].concat((0,r.Z)(d.split("\n")),["Milage: ".concat(h(u.toString())),"Price: ".concat(m)]);return(0,x.jsxs)("div",{className:"card-modal",children:[(0,x.jsx)("img",{className:"card-modal__img",src:t,"aria-label":"".concat(a," ").concat(i)}),(0,x.jsxs)("div",{className:"card-modal__car-header",children:[(0,x.jsxs)("h3",{children:["".concat(a," "),(0,x.jsx)("span",{children:i}),", ".concat(s)]}),(0,x.jsx)(Z,{list:f,size:"medium"}),(0,x.jsx)("p",{children:o})]}),(0,x.jsxs)("div",{className:"card-modal__accessories",children:[(0,x.jsx)("h4",{children:"Accessories and functionalities:"}),(0,x.jsxs)("div",{children:[(0,x.jsx)(Z,{list:c}),(0,x.jsx)(Z,{list:l})]})]}),(0,x.jsxs)("div",{className:"card-modal__rental-conditions",children:[(0,x.jsx)("h4",{children:"Rental Conditions:"}),(0,x.jsx)(S,{list:p})]}),(0,x.jsx)("a",{className:"card-modal__btn",href:"tel:+380730000000",children:"Rental Car"})]})},P=function(e){var n,t=e.car,r=t.id,s=t.img,o=t.make,l=t.model,d=t.year,u=t.rentalPrice,m=t.favorite,h=(0,i.useState)(!1),f=(0,a.Z)(h,2),p=f[0],j=f[1],_=(0,c.G_)(),g=(0,a.Z)(_,1)[0];n=p,(0,i.useEffect)((function(){document.body.style.overflow=n?"hidden":"unset"}),[n]);var w=function(e){var n=e.address,t=e.rentalCompany,r=e.typeClass,a=void 0===r?"Premium":r,i=e.type,s=e.model,o=e.id,c=e.functionalities,l=n.split(",");return[l[1].trim(),l[2].trim(),t,a,"".concat(M(i)).trim(),s,"".concat(o).trim(),c[0]]}(t),N=function(){j((function(e){return!e}))},C=function(){var e=(0,b.Z)(k().mark((function e(n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g({id:n,favorite:!m})}catch(t){v.Am.warn("Sorry something wrong")}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)("li",{children:[(0,x.jsxs)("div",{className:"card",children:[(0,x.jsxs)("div",{className:"card__wrapper",children:[(0,x.jsxs)("div",{className:"card__thumb-img",children:[(0,x.jsx)("img",{src:s,alt:o,loading:"lazy"}),(0,x.jsx)("button",{type:"button",onClick:function(){return C(r)},children:(0,x.jsx)(y,{className:m?"favorited":""})})]}),(0,x.jsxs)("div",{className:"card__thumb-title",children:[(0,x.jsxs)("h3",{children:["".concat(o," "),(0,x.jsx)("span",{children:l}),", ".concat(d)]}),(0,x.jsx)("p",{children:u})]}),(0,x.jsx)(Z,{list:w,size:"small"})]}),(0,x.jsx)("button",{type:"button",className:"card__btn",onClick:N,children:"Learn more"})]}),p&&(0,x.jsx)(L,{onCloseModal:N,children:(0,x.jsx)(E,{car:t})})]})},$=function(e){var n=e.list,t=void 0===n?[]:n;return t.length?(0,x.jsx)("ul",{className:"adverts__list",children:t.map((function(e){return(0,x.jsx)(P,{car:e},"".concat(e.make,"_").concat(Math.random(1)))}))}):(0,x.jsx)("p",{className:"adverts__no-content",children:"Sorry, there are no cars with this request in stock..."})},A=function(){var e,n,t,u=(0,s.v9)(o),m=(0,c.FP)(),h=m.data,f=m.isLoading,p=(0,i.useState)(1),v=(0,a.Z)(p,2),j=v[0],_=v[1],g={brands:[],prices:[]},b=(0,i.useMemo)((function(){}),[]),N=0,k=0;f||(b=function(e,n){return e.filter((function(e){if(n.brand&&e.make!==n.brand&&"All"!==n.brand)return!1;if(n.price&&Number(e.rentalPrice.replace(/(\$)/,""))>Number(n.price))return!1;if(n.mileage.from.trim()||n.mileage.to.trim()){var t=n.mileage,r=t.from,a=t.to,i=Number(e.mileage);if(void 0!==r&&i<Number(r)||void 0!==a&&i>Number(a))return!1}return!0}))}(h,u),g={brands:["All"].concat((0,r.Z)(new Set(h.map((function(e){return e.make}))))),prices:(e=0,n=Math.max.apply(Math,(0,r.Z)(new Set(h.map((function(e){return e.rentalPrice.replace(/(\$)/,"")}))))),t=10,Array.from({length:Math.floor((n-e)/t)+1},(function(n,r){return e+r*t})))},N=b.length,k=N?Math.ceil(N/12):1);var y=(0,i.useMemo)((function(){var e,n=12*(j-1),t=n+12;return null===(e=b)||void 0===e?void 0:e.slice(n,t)}),[j,b]);return(0,x.jsxs)(l.Z,{children:[f&&(0,x.jsx)(d.Z,{}),!f&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w,{filtersList:g}),(0,x.jsx)($,{list:y}),(0,x.jsx)("div",{className:"buttons__wrapper",children:k>j&&(0,x.jsx)("button",{type:"button",className:"load-more__btn",onClick:function(){j<k&&(_((function(e){return e+1})),window.scrollTo(0,0))},children:"Load more"})})]})]})}}}]);
//# sourceMappingURL=245.3eb1b97a.chunk.js.map